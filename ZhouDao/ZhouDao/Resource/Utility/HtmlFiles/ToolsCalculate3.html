<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<meta content="yes" name="apple-mobile-web-app-capable" />
<meta content="black" name="apple-mobile-web-app-status-bar-style" />
<meta content="telephone=no" name="format-detection" />
<title>违约金计算器</title>
    <link rel="stylesheet" href="normalize3.0.2.min.css" />
    <link href="mobiscroll.css" rel="stylesheet" />
    <link href="mobiscroll_date.css" rel="stylesheet" />
    <link href="base.css" rel="stylesheet">
    <script type="text/javascript">
        function showZhoudaoToast(toast,aa) {
            javascript:zhoudao.shareZhoudao(toast,aa,'weiyuejin');
        }
        function setupWebViewJavascriptBridge(callback) {
                if (window.WebViewJavascriptBridge) { return callback(WebViewJavascriptBridge); }
                if (window.WVJBCallbacks) { return window.WVJBCallbacks.push(callback); }
                window.WVJBCallbacks = [callback];
                var WVJBIframe = document.createElement('iframe');
                WVJBIframe.style.display = 'none';
                WVJBIframe.src = 'wvjbscheme://__BRIDGE_LOADED__';
                document.documentElement.appendChild(WVJBIframe);
                setTimeout(function() { document.documentElement.removeChild(WVJBIframe) }, 0)
            } 
    </script>
</head>
<body>
    <div id="container">
        <div class="inputForm">
            <form>
                <dl>
                    <dt>标的金额（元）</dt>
                    <dd><input type="number" class="ipt iptmoney" placeholder="请输入标的金额"></dd>
                </dl>
                <dl class="appoint">
                    <dt>利率选项</dt>
                    <dd>
                        <select class="select" name="category">
                            <option value="1">日利率</option>
                            <option value="2">月利率</option>
                            <option value="3">年利率</option>
                        </select>
                    </dd>
                </dl>
                <dl class="one">
                    <dt>约定利率(%)</dt>
                    <dd><input type="number" class="ipt iptrate" placeholder="请输入利率数值">   </dd>
                </dl>
                <dl>
                    <dt>起算日期</dt>
                    <dd><input type="text" id="beginTime" class="ipt" placeholder="点击选择起算日期" data-date-format="yyyy-mm-dd" readonly /></dd>
                </dl>
                <dl>
                    <dt>截至日期</dt>
                    <dd><input type="text" id="endTime" readonly class="ipt" placeholder="点击选择截止日期" /></dd>
                </dl>
                <div class="operation">
                    <input type="submit" class="btn sub" value="计算" />
                    <input type="reset" class="btn reset" value="重置" />
                </div>
            </form>
        </div>
        <div class="resultsBox">
            <div class="hd">
                <h2>计算结果</h2>
                <a href="#" id="buttons" class="share"><img src="share.png"/></a>
            </div>
            <div class="resultsCon">
                <div class="options">
                    <ul>
                        <li class="all active" value="1">按约定利率</li>
                        <li class="half" value="2">人民银行同期利率</li>
                    </ul>
                </div>
                <div class="appoint">
                <dl>
                    <dt>逾期违约金(元)</dt>
                    <dd class="sum appoint_money">0.00</dd>
                </dl>
                <dl>
                    <dt>逾期(天)</dt>
                    <dd class="sum appoint_date">0.00</dd>
                </dl>
                </div>
                <div class="bank" style="display: none;">
                    <dl>
                        <dt>逾期违约金(元)</dt>
                        <dd class="sum bank_money">0.00</dd>
                    </dl>
                    <dl>
                        <dt>逾期(天)</dt>
                        <dd class="sum bank_day">0.00</dd>
                    </dl>
                </div>
            </div>
        </div>
    </div>
<script src="jquery.min.js"></script>
<script src="mobiscroll_date.js" charset="gb2312"></script>
<script src="mobiscroll.js"></script>
<script src="weiyuejin.js"></script>
<script src="alert.js"></script>
<script>
    function conditions(){
        // 选项
        var a1 = $(".iptmoney").val();
        var a2 = $(".select").find("option:selected").val();
        var a3 = $("#beginTime").val();
        var a4 = $("#endTime").val();

        var a = a1 + "," + a2 + "," +a3 +"," + a4;
        return a;
    }
    function results(){
        //结果
        var b1 = $(".active").val();
        var b2 = $(".appoint_money").text();
        var b3 = $(".appoint_date").text();
        var b4 = $(".bank_money").text();
        var b5 = $(".bank_day").text();

        var b = b1 + "," + b2 + "," + b3 + "," + b4 + ","+b5;
        return b;
    }


    $(".share").click(function(){
        var a = conditions();
        var b = results();
        showZhoudaoToast(a,b);
    });
    setupWebViewJavascriptBridge(function(bridge) {
        var callbackButton = document.getElementById('buttons')
        callbackButton.onclick = function(e) {
            var a = conditions()
            var b = results()

            bridge.callHandler('shareZhoudao', {'conditions': a,'results': b,'type': 'weiyuejin',})
        }
    })
</script>
</body>
</html>